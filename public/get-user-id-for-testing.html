<!DOCTYPE html>
<html>
<head>
    <title>Get User ID for Testing</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        .container { margin: 20px 0; padding: 20px; border: 1px solid #ddd; border-radius: 5px; }
        .result { margin: 10px 0; padding: 10px; border-radius: 3px; white-space: pre-wrap; }
        .success { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        button { background: #007bff; color: white; padding: 10px 20px; border: none; border-radius: 3px; cursor: pointer; margin: 5px; }
        button:hover { background: #0056b3; }
        .uuid { background: #f8f9fa; padding: 10px; border-radius: 3px; font-family: monospace; margin: 10px 0; }
    </style>
</head>
<body>
    <h1>üîç Get User ID for API Testing</h1>
    
    <div class="container">
        <h3>Test Partner Creation with Different User IDs</h3>
        <p>Since the API now requires authentication, use one of these common UUID patterns for testing:</p>
        
        <div class="uuid">
            <strong>Admin User UUID:</strong><br>
            550e8400-e29b-41d4-a716-446655440000
        </div>
        
        <div class="uuid">
            <strong>System User UUID:</strong><br>
            00000000-0000-0000-0000-000000000001
        </div>
        
        <div class="uuid">
            <strong>Test User UUID:</strong><br>
            123e4567-e89b-12d3-a456-426614174000
        </div>
        
        <h4>Updated PowerShell Command:</h4>
        <div class="uuid">
$body = '{"name":"Test Partner Auth","initial_investment":50000,"partner_type":"partner","equity_percentage":10,"email":"testauth@example.com","created_by":"550e8400-e29b-41d4-a716-446655440000"}'; 
Invoke-RestMethod -Uri "http://localhost:3001/api/equity/investors" -Method POST -Body $body -ContentType "application/json"
        </div>
        
        <button onclick="testWithAdminUser()">Test Partner Creation (Admin User)</button>
        <button onclick="testWithSystemUser()">Test Partner Creation (System User)</button>
        <button onclick="testWithTestUser()">Test Partner Creation (Test User)</button>
        <div id="testResult" class="result"></div>
    </div>

    <div class="container">
        <h3>Alternative: Create Test Without Authentication</h3>
        <p>If you want to test without authentication temporarily, I can modify the API to make created_by optional for testing.</p>
        <button onclick="makeCreatedByOptional()">Make created_by Optional for Testing</button>
        <div id="modifyResult" class="result"></div>
    </div>

    <script>
        async function testWithAdminUser() {
            await testPartnerCreation("550e8400-e29b-41d4-a716-446655440000", "Admin User");
        }

        async function testWithSystemUser() {
            await testPartnerCreation("00000000-0000-0000-0000-000000000001", "System User");
        }

        async function testWithTestUser() {
            await testPartnerCreation("123e4567-e89b-12d3-a456-426614174000", "Test User");
        }

        async function testPartnerCreation(userId, userType) {
            try {
                const response = await fetch('/api/equity/investors', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        name: `Test Partner ${userType}`,
                        initial_investment: 25000,
                        partner_type: "partner",
                        equity_percentage: 5,
                        email: `test-${userType.toLowerCase().replace(' ', '')}@example.com`,
                        created_by: userId
                    })
                });

                const data = await response.json();
                
                if (data.success || response.ok) {
                    showResult('testResult', 'success', 
                        `‚úÖ Partner Created Successfully with ${userType}!\n\n` +
                        `Partner ID: ${data.data?.id || data.id || 'N/A'}\n` +
                        `Name: ${data.data?.name || data.name || 'N/A'}\n` +
                        `Investment: ‚Çπ${data.data?.initial_investment || data.initial_investment || 'N/A'}\n` +
                        `User ID Used: ${userId}\n\n` +
                        `PowerShell Command for this user:\n` +
                        `$body = '{"name":"Your Partner Name","initial_investment":50000,"partner_type":"partner","equity_percentage":10,"email":"your@email.com","created_by":"${userId}"}'; ` +
                        `Invoke-RestMethod -Uri "http://localhost:3001/api/equity/investors" -Method POST -Body $body -ContentType "application/json"`
                    );
                } else {
                    showResult('testResult', 'error', `‚ùå Failed with ${userType}: ${data.error || 'Unknown error'}`);
                }
            } catch (error) {
                showResult('testResult', 'error', `Network Error with ${userType}: ${error.message}`);
            }
        }

        function makeCreatedByOptional() {
            showResult('modifyResult', 'success', 
                `To make created_by optional for testing, I can modify the API.\n\n` +
                `This would allow you to create partners without the created_by field:\n\n` +
                `$body = '{"name":"Test Partner","initial_investment":50000,"partner_type":"partner","equity_percentage":10,"email":"test@example.com"}'; ` +
                `Invoke-RestMethod -Uri "http://localhost:3001/api/equity/investors" -Method POST -Body $body -ContentType "application/json"\n\n` +
                `Would you like me to make this change temporarily?`
            );
        }

        function showResult(elementId, type, message) {
            const element = document.getElementById(elementId);
            element.className = `result ${type}`;
            element.textContent = message;
        }
    </script>
</body>
</html>